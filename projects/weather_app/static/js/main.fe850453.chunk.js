(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{14:function(e,t,s){},15:function(e,t,s){},16:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s(2),r=s.n(i),n=s(4),c=s.n(n),l=(s(14),s(5)),o=s(6),h=s(1),u=s(8),d=s(7),j=(s(15),function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={loading:!1,scale:"C",location:"",temp:"",sky:"",icon:"",feels_like:"",humidity:"",pressure:"",sunrise:"",sunset:"",error:0},a.getPosition=a.getPosition.bind(Object(h.a)(a)),a.getPositionErrorHandler=a.getPositionErrorHandler.bind(Object(h.a)(a)),a.fetchWeather=a.fetchWeather.bind(Object(h.a)(a)),a.tempScaleChange=a.tempScaleChange.bind(Object(h.a)(a)),a}return Object(o.a)(s,[{key:"getPosition",value:function(){if(!navigator.geolocation)return this.setError(2);this.setState({loading:!0,error:0}),navigator.geolocation.getCurrentPosition(this.fetchWeather,this.getPositionErrorHandler)}},{key:"setError",value:function(e){this.setState({loading:!1,error:e})}},{key:"getPositionErrorHandler",value:function(e){this.setError(1)}},{key:"fetchWeather",value:function(e){this.setState({lat:Math.round(e.coords.latitude),lon:Math.round(e.coords.longitude)}),fetch("https://fcc-weather-api.glitch.me/api/current?lon="+e.coords.longitude+"&lat="+e.coords.latitude).then((function(e){return e.json()})).then(this.fetchResultHandler.bind(this),this.fetchErrorHandler.bind(this))}},{key:"fetchResultHandler",value:function(e){if(Math.round(e.coord.lat)!==this.state.lat||Math.round(e.coord.lon)!==this.state.lon)return this.setError(2);function t(e){var t=new Date(1e3*e),s="0"+t.getHours(),a="0"+t.getMinutes();return s.substr(-2)+":"+a.substr(-2)}this.setState({loading:!1,location:e.name&&e.sys.country&&e.name+", "+e.sys.country||"",temp:e.main.temp||0===e.main.temp?Math.round(e.main.temp):"",feels_like:e.main.feels_like||0===e.main.feels_like?Math.round(e.main.feels_like):"",sky:e.weather[0].main||"",icon:e.weather[0].icon||!1,humidity:e.main.humidity||0===e.main.humidity?e.main.humidity+" %":"",pressure:e.main.pressure||0===e.main.pressure?e.main.pressure+" mbar":"",sunrise:e.sys.sunrise?t(e.sys.sunrise):"",sunset:e.sys.sunset?t(e.sys.sunset):"",error:0})}},{key:"fetchErrorHandler",value:function(e){this.setError(2)}},{key:"tempScaleChange",value:function(){var e,t,s;""===this.state.temp||isNaN(this.state.temp)||("C"===this.state.scale?(e=Math.round(1.8*this.state.temp+32),t=""===this.state.feels_like||isNaN(this.state.feels_like)?"":Math.round(1.8*this.state.feels_like+32),s="F"):(e=Math.round((this.state.temp-32)/1.8),t=""===this.state.feels_like||isNaN(this.state.feels_like)?"":Math.round((this.state.feels_like-32)/1.8),s="C"),this.setState({temp:e,feels_like:t,scale:s}))}},{key:"componentDidMount",value:function(){this.getPosition()}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"weatherApp",children:[Object(a.jsx)(m,{sky:this.state.sky}),Object(a.jsx)(b,{icon:this.state.icon,loading:this.state.loading}),this.state.error?Object(a.jsx)(_,{error:this.state.error,loading:this.state.loading,getPosition:this.getPosition}):Object(a.jsx)(g,{location:this.state.location,temp:this.state.temp,sky:this.state.sky,scale:this.state.scale,tempScaleChange:this.tempScaleChange,feels_like:this.state.feels_like,humidity:this.state.humidity,pressure:this.state.pressure,sunrise:this.state.sunrise,sunset:this.state.sunset}),Object(a.jsx)(f,{})]})}}]),s}(r.a.Component));function m(e){var t=["","","",""];switch(e.sky){case"Snow":t[0]=" bg__layer_ON";break;case"Rain":t[1]=" bg__layer_ON";break;case"Clouds":t[2]=" bg__layer_ON";break;case"Clear":t[3]=" bg__layer_ON"}return Object(a.jsxs)("div",{className:"bg",children:[Object(a.jsx)("div",{className:"bg__layer bg__layer_snow"+t[0]}),Object(a.jsx)("div",{className:"bg__layer bg__layer_rain"+t[1]}),Object(a.jsx)("div",{className:"bg__layer bg__layer_clouds"+t[2]}),Object(a.jsx)("div",{className:"bg__layer bg__layer_clear"+t[3]})]})}function b(e){return Object(a.jsxs)("header",{className:"header",children:[Object(a.jsx)("div",{className:"header__gap"}),Object(a.jsx)("h1",{className:"header__h1",children:"Free Weather App"}),e.loading?Object(a.jsx)("p",{className:"header__loading",children:"Loading..."}):Object(a.jsx)(p,{icon:e.icon}),Object(a.jsx)("div",{className:"header__gap"})]})}function p(e){return Object(a.jsx)("div",{className:"header__icon",children:e.icon&&Object(a.jsx)("img",{src:e.icon,className:"header__img",alt:"Sky Icon"})})}function _(e){return Object(a.jsx)("section",{className:"errorMessage",children:Object(a.jsxs)("p",{className:"errorMessage__text",children:[["Denied access to geolocation. Please allow the page to access your location.","Information is temporarily unavailable. Please "][e.error-1],2===e.error&&Object(a.jsx)("button",{className:"errorMessage__button",onClick:e.getPosition,children:"try again."})]})})}function g(e){return Object(a.jsxs)("section",{className:"display",children:[Object(a.jsx)(y,{type:"location",value:e.location}),Object(a.jsx)(y,{type:"temperature",value:e.temp+"\xb0",scale:e.scale,tempScaleChange:e.tempScaleChange}),Object(a.jsx)(y,{type:"sky",value:e.sky}),Object(a.jsx)(y,{type:"feelsLike",value:e.feels_like+"\xb0",scale:e.scale,tempScaleChange:e.tempScaleChange}),Object(a.jsx)(y,{type:"humidity",value:e.humidity}),Object(a.jsx)(y,{type:"pressure",value:e.pressure}),Object(a.jsx)(y,{type:"sunrise",value:e.sunrise}),Object(a.jsx)(y,{type:"sunset",value:e.sunset})]})}function y(e){return Object(a.jsxs)("div",{className:"section "+e.type,children:[Object(a.jsx)("div",{className:"section__gap"}),Object(a.jsx)("h2",{className:"section__header",children:"feelsLike"===e.type?"FEELS LIKE":e.type.toUpperCase()}),Object(a.jsx)("p",{className:"section__value",children:e.value}),e.tempScaleChange&&Object(a.jsx)("button",{className:"section__button",onClick:e.tempScaleChange,children:e.scale})]})}function f(){return Object(a.jsx)("footer",{children:Object(a.jsxs)("a",{className:"footer__link",href:"https://www.instagram.com/miroslavpetrov_/",target:"_blank",rel:"noopener noreferrer",children:[Object(a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",style:{verticalAlign:"middle",width:16},children:[Object(a.jsx)("path",{d:"M256 49c67 0 75 1 102 2 24 1 38 5 47 9a78 78 0 0129 18 78 78 0 0118 29c4 9 8 23 9 47 1 27 2 35 2 102l-2 102c-1 24-5 38-9 47a83 83 0 01-47 47c-9 4-23 8-47 9-27 1-35 2-102 2l-102-2c-24-1-38-5-47-9a78 78 0 01-29-18 78 78 0 01-18-29c-4-9-8-23-9-47-1-27-2-35-2-102l2-102c1-24 5-38 9-47a78 78 0 0118-29 78 78 0 0129-18c9-4 23-8 47-9 27-1 35-2 102-2m0-45c-68 0-77 0-104 2-27 1-45 5-61 11a123 123 0 00-45 29 123 123 0 00-29 45c-6 16-10 34-11 61-2 27-2 36-2 104l2 104c1 27 5 45 11 61a123 123 0 0029 45 123 123 0 0045 29c16 6 34 10 61 11a1796 1796 0 00208 0c27-1 45-5 61-11a129 129 0 0074-74c6-16 10-34 11-61 2-27 2-36 2-104l-2-104c-1-27-5-45-11-61a123 123 0 00-29-45 123 123 0 00-45-29c-16-6-34-10-61-11-27-2-36-2-104-2z"}),Object(a.jsx)("path",{d:"M256 127a129 129 0 10129 129 129 129 0 00-129-129zm0 213a84 84 0 1184-84 84 84 0 01-84 84z"}),Object(a.jsx)("circle",{cx:"390.5",cy:"121.5",r:"30.2"})]})," Miroslav Petrov"]})})}var O=function(){return Object(a.jsx)(j,{})};c.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(O,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.fe850453.chunk.js.map