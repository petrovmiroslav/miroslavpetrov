(this["webpackJsonpchoropleth-map"]=this["webpackJsonpchoropleth-map"]||[]).push([[0],{30:function(t,e,a){},31:function(t,e,a){},33:function(t,e,a){"use strict";a.r(e);var r=a(0),i=a(2),n=a.n(i),o=a(18),s=a.n(o),c=(a(30),a(9)),l=a(10),h=a(3),d=a(22),u=a(21),p=a(40),f=a(41),m=a(43),g=a(42),b=a(19),j=a(48),v=a(44),O=a(47),x=a(45),y=a(20),w=a(16),k=(a(31),function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var r;return Object(c.a)(this,a),(r=e.call(this,t)).state={loading:!0,error:!1,map:null,data:null,clientW:0,timerID:0,tooltip:{text:"Template County,\nTM: 00.0%",clientW:0,pos:{top:0,left:0,width:0},style:{transform:"translate3d(0, 0, 0)",opacity:0}}},r.svgRef=n.a.createRef(),r.tooltipRef=n.a.createRef(),r.mouseoverHandler=r.mouseoverHandler.bind(Object(h.a)(r)),r.mouseoutHandler=r.mouseoutHandler.bind(Object(h.a)(r)),r.resizeHandler=r.resizeHandler.bind(Object(h.a)(r)),r.resizeTooltip=r.resizeTooltip.bind(Object(h.a)(r)),r.getData=r.getData.bind(Object(h.a)(r)),r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeHandler),this.resizeTooltip(),this.getData()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeHandler)}},{key:"getData",value:function(){this.setState({loading:!0,error:!1}),this.fetchData("https://raw.githubusercontent.com/no-stack-dub-sack/testable-projects-fcc/master/src/data/choropleth_map/counties.json",this.fetchMapResultHandler),this.fetchData("https://raw.githubusercontent.com/no-stack-dub-sack/testable-projects-fcc/master/src/data/choropleth_map/for_user_education.json",this.fetchDataResultHandler)}},{key:"fetchData",value:function(t,e){fetch(t).then((function(t){return t.json()})).then(e.bind(this),this.fetchErrorHandler.bind(this))}},{key:"fetchMapResultHandler",value:function(t){this.setState({map:t}),this.createMap()}},{key:"fetchDataResultHandler",value:function(t){var e=t.map((function(t){return[t.fips,t]})),a=Object(p.a)(e,(function(t){return t[1].bachelorsOrHigher})),r=Object(f.a)(e,(function(t){return t[1].bachelorsOrHigher}));this.setState({data:new Map(e),dataMin:a,dataMax:r,color:Object(x.a)([a,r],O.a[9])}),this.createMap()}},{key:"fetchErrorHandler",value:function(t){this.setState({error:!0})}},{key:"resizeHandler",value:function(){window.clearTimeout(this.state.timerID),this.setState({timerID:window.setTimeout(this.resizeTooltip,100)})}},{key:"resizeTooltip",value:function(){this.setState({tooltip:this.setTooltipPos(),clientW:document.documentElement.clientWidth})}},{key:"setTooltipPos",value:function(){var t=Object.assign({},this.state.tooltip),e=this.tooltipRef.current.getBoundingClientRect();return t.pos={top:e.top,left:e.left,width:e.width,height:e.height},t}},{key:"legend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,a=t.title,r=t.tickSize,i=void 0===r?6:r,n=t.width,o=void 0===n?320:n,s=t.height,c=void 0===s?44+i:s,l=t.marginTop,h=void 0===l?18:l,d=t.marginRight,u=void 0===d?0:d,p=t.marginBottom,f=void 0===p?16+i:p,b=t.marginLeft,v=void 0===b?0:b,O=t.ticks,x=void 0===O?o/64:O,w=t.tickFormat,k=t.tickValues,_=Object(g.a)("svg").attr("width",o).attr("height",c).attr("viewBox",[0,0,o,c]).style("overflow","visible").style("display","block"),H=function(t){return t.selectAll(".tick line").attr("y1",h+f-c)},z=e.thresholds(),M=w,D=Object(y.a)().domain([-1,e.range().length-1]).rangeRound([v,o-u]);return k=Object(m.a)(z.length),w=function(t){return M(z[t],t)},_.append("g").selectAll("rect").data(e.range()).join("rect").attr("x",(function(t,e){return D(e-1)})).attr("y",h).attr("width",(function(t,e){return D(e)-D(e-1)})).attr("height",c-h-f).attr("fill",(function(t){return t})),_.append("g").attr("transform","translate(0,".concat(c-f,")")).call(Object(j.a)(D).ticks(x,"string"===typeof w?w:void 0).tickFormat("function"===typeof w?w:void 0).tickSize(i).tickValues(k)).call(H).call((function(t){return t.select(".domain").remove()})).call((function(t){return t.append("text").attr("x",v).attr("y",h+f-c-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("font-size","14px").text(a)})),_.node()}},{key:"createMap",value:function(){var t=this;if(this.state.map&&this.state.data){this.setState({loading:!1,error:!1});var e=Object(b.a)(this.svgRef.current).attr("viewBox",[0,0,975,610]);e.append("g").attr("transform","translate(610,20)").append((function(){return t.legend({color:t.state.color,title:"Percentage (%)",width:260,tickFormat:function(t){return Math.round(t)}})})),e.append("g").selectAll("path").data(Object(w.a)(this.state.map,this.state.map.objects.counties).features).join("path").attr("data-fips",(function(e){return t.state.data.get(e.id).fips})).attr("data-education",(function(e){return t.state.data.get(e.id).bachelorsOrHigher})).attr("fill",(function(e){return t.state.color(t.state.data.get(e.id).bachelorsOrHigher)})).attr("d",Object(v.a)()).on("mouseover",this.mouseoverHandler).on("mouseout",this.mouseoutHandler),e.append("path").datum(Object(w.b)(this.state.map,this.state.map.objects.states,(function(t,e){return t!==e}))).attr("class","map__state").attr("d",Object(v.a)())}}},{key:"mouseoverHandler",value:function(t){var e=this.state.data.get(+t.currentTarget.attributes["data-fips"].value),a=Object.assign({},this.state.tooltip);a.text="".concat(e.area_name,",\n").concat(e.state,": ").concat(e.bachelorsOrHigher,"%");var r=t.pageX+a.pos.width<this.state.clientW?t.pageX-a.pos.left-.2*a.pos.width:t.pageX-a.pos.left-.8*a.pos.width,i=t.pageY-(a.pos.top+1.2*a.pos.height);a.style={transform:"translate3d(".concat(r,"px, ").concat(i,"px, 0)"),opacity:1},this.setState({tooltip:a})}},{key:"mouseoutHandler",value:function(t){var e=Object.assign({},this.state.tooltip);e.style={transform:"translate3d(0px, 0px, 0)",opacity:0},this.setState({tooltip:e})}},{key:"render",value:function(){return Object(r.jsx)("section",{className:"map",children:Object(r.jsxs)("div",{className:"map__layout",children:[Object(r.jsx)("h1",{className:"map__header",children:"United States Educational Attainment"}),Object(r.jsx)("p",{className:"map__text",children:"Percentage of adults age 25 and older with a bachelor's degree or higher (2010-2014)"}),this.state.error?Object(r.jsx)(_,{getData:this.getData}):this.state.loading?Object(r.jsx)("p",{className:"map__loading",children:"Loading..."}):Object(r.jsx)("svg",{className:"map__svg",ref:this.svgRef,preserveAspectRatio:"xMidYMid meet"}),Object(r.jsx)("section",{className:"map__tooltip",ref:this.tooltipRef,style:this.state.tooltip.style,children:this.state.tooltip.text})]})})}}]),a}(n.a.Component));function _(t){return Object(r.jsxs)("p",{className:"map__error",children:["Information is temporarily unavailable. Please ",Object(r.jsx)("button",{className:"map__errorButton",onClick:t.getData,children:"try again."})]})}function H(){return Object(r.jsx)("footer",{children:Object(r.jsxs)("a",{className:"footer__link",href:"https://www.instagram.com/miroslavpetrov_/",target:"_blank",rel:"noopener noreferrer",children:[Object(r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",style:{verticalAlign:"middle",width:16},children:[Object(r.jsx)("path",{d:"M256 49c67 0 75 1 102 2 24 1 38 5 47 9a78 78 0 0129 18 78 78 0 0118 29c4 9 8 23 9 47 1 27 2 35 2 102l-2 102c-1 24-5 38-9 47a83 83 0 01-47 47c-9 4-23 8-47 9-27 1-35 2-102 2l-102-2c-24-1-38-5-47-9a78 78 0 01-29-18 78 78 0 01-18-29c-4-9-8-23-9-47-1-27-2-35-2-102l2-102c1-24 5-38 9-47a78 78 0 0118-29 78 78 0 0129-18c9-4 23-8 47-9 27-1 35-2 102-2m0-45c-68 0-77 0-104 2-27 1-45 5-61 11a123 123 0 00-45 29 123 123 0 00-29 45c-6 16-10 34-11 61-2 27-2 36-2 104l2 104c1 27 5 45 11 61a123 123 0 0029 45 123 123 0 0045 29c16 6 34 10 61 11a1796 1796 0 00208 0c27-1 45-5 61-11a129 129 0 0074-74c6-16 10-34 11-61 2-27 2-36 2-104l-2-104c-1-27-5-45-11-61a123 123 0 00-29-45 123 123 0 00-45-29c-16-6-34-10-61-11-27-2-36-2-104-2z"}),Object(r.jsx)("path",{d:"M256 127a129 129 0 10129 129 129 129 0 00-129-129zm0 213a84 84 0 1184-84 84 84 0 01-84 84z"}),Object(r.jsx)("circle",{cx:"390.5",cy:"121.5",r:"30.2"})]})," Miroslav Petrov"]})})}var z=function(){return Object(r.jsxs)("div",{className:"app",children:[Object(r.jsx)(k,{}),Object(r.jsx)(H,{})]})};s.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(z,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.5bd1e8e2.chunk.js.map